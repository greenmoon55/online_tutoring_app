<% provide(:title, @title)%>

  <% if @add_room_requests%>
    <% @add_room_requests.each do |add_room_request|%>
      <li>
      <%= User.find(add_room_request[:sender_id]).name%> 将你加入到
      <%= add_room_request[:content]%>聊天室中
      <%= form_tag(:controller=>"requests", :action=> "delete_request",method:"delete") do%>
      <%= hidden_field_tag :request_id, add_room_request.id%>
      <%= submit_tag "删除", class: "btn btn-primary"%>
        <% end %>
      
      </li>
    <%end%>
  <% end%>

  <% if @delete_room_requests%>
    <% @delete_room_requests.each do |delete_room_request|%>
      <li>
      <%= User.find(delete_room_request.sender_id).name%> 将你从
      <%= delete_room_request[:content]%>删除了
      <%= form_tag(:controller=>"requests", :action=> "delete_request",method:"delete") do%>
      <%= hidden_field_tag :request_id, delete_room_request.id%>
      <%= submit_tag "删除", class: "btn btn-primary"%>
        <% end %>
      </li>
    <%end%>
  <% end%>

  <% if @delete_requests%>
    <% @delete_requests.each do |delete_request|%>
      <li>
      <%= User.find(delete_request.sender_id).name%> 
      <%= delete_request[:content]%>
      <%= form_tag(:controller=>"requests", :action=> "delete_request",method:"delete") do%>
      <%= hidden_field_tag :request_id, delete_request.id%>
      <%= submit_tag "删除", class: "btn btn-primary"%>
        <% end %>
      </li>
    <%end%>
  <% end%>


<% if @requests.count!= 0||@accept_requests.count != 0|| @refuse_requests.count != 0 %>
  <% if @requests%>
    <% @requests.each do |request|%>
    <%=request.sender_id %>
    <li>
    理由：<%= request.content%>

    <%= render 'shared/agree_form', user: User.find(request.sender_id) %>
    <%= render 'shared/refuse_form', user: User.find(request.sender_id)%>

    </li>
    <% end%>
  <% end%>
    
  <% if @accept_requests%>
    <% @accept_requests.each do |accept_request|%>
      <li>
      <%= User.find(accept_request.sender_id).name%> 接受了你的请求
      <%= form_tag(:controller=>"requests", :action=> "delete_request",method:"delete") do%>
      <%= hidden_field_tag :request_id, accept_request.id%>
      <%= submit_tag "删除", class: "btn btn-primary"%>
        <% end %>
      </li>
    <%end%>
  <% end%>

  <% if @refuse_requests%>
    <% @refuse_requests.each do |refuse_request|%>
      <li>
      <%= User.find(refuse_request.sender_id).name%>拒绝了你的请求
      <%= form_tag(:controller=>"requests", :action=> "delete_request",method:"delete") do%>
      <%= hidden_field_tag :request_id, refuse_request.id%>
      <%= submit_tag "删除", class: "btn btn-primary"%>
        <% end %>
      </li>
    <%end%>
  <% end%>
<% else %>
          无任何请求或消息
<% end%>

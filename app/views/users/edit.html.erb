<% provide(:title, t("user.edit")) %>
<div class="row">
  <%= render 'shared/error_messages', object: @user %>
  <div class="span6">
    <h1><%= t("user.edit") %> </h1>
    <%= form_for(@user) do |f| %>

      <%= f.label :name %>
      <%= f.text_field :name %>

      <%= f.label :email %>
      <%= f.text_field :email %>
      
      <%= f.label :gender %>
      <%= f.select :gender, [['男', 1],['女', 0]], include_blank: true %>

      <%= f.label :district_id %>
      <%= f.select :district_id, districts, include_blank: true %>

      <%# f.select :student_subject_ids, Subject.all.collect {|x| [x.name, x.id]}, {}, :multiple => true %>
      <%= f.label "想学习的科目" %>
      <div class="role-select">
      <% Subject.all.each do |subject| %>
        <label>
          <%= check_box_tag("user[student_subject_ids][]", subject.id, @user.student_subject_ids.include?(subject.id)) %>
          <%= subject.name %>
        </label>
        <%= hidden_field_tag "user[student_subject_ids][]" %>
      <% end %>
      </div>

      <%= f.label :description %>
      <%= f.text_field :description %>

      <div class="role-select">
        <%= f.label :student_visible %>
        <%= f.check_box :student_visible %>
      </div>

      <%= f.submit t("common.update"), class: "btn btn-primary" %>
    <% end %>
    <%= link_to("我也想当老师", full_role_user_path(@user), method: :delete, confirm: :"你确定吗？") unless current_user.full_role? %>
  </div>
  <div class="span6">
    <%= render "edit_password" %>
  </div>
</div>
